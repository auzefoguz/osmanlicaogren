<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Osmanlıca Klavye</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
</head>
<body style="font-family:'Lateef', serif; background:linear-gradient(to right, #1a3b5d, #3f5b82); color:white; padding:1rem;">

<div class="container">
  <h2 class="text-center text-warning mb-3">📱 Osmanlıca Dokunmatik Klavye</h2>

  <!-- Output -->
  <div id="outputArea" contenteditable="true" class="form-control mb-3" style="direction:rtl; font-size:2rem; min-height:100px;"></div>

  <!-- Harf Bilgisi Kutusu -->
  <div id="harfBilgiKutusu" class="alert alert-info d-none" style="direction:rtl;"></div>

  <!-- Tuşlar -->
  <div id="klavye" class="text-center mb-4">
    <div class="d-flex flex-wrap justify-content-center gap-2">
      <!-- Harfler buraya otomatik eklenecek -->
    </div>
  </div>

  <!-- Alıştırma -->
  <div class="card text-dark bg-light mb-3">
    <div class="card-body">
      <h5>📝 Yazım Alıştırması:</h5>
      <p>Bu kelimeyi yaz: <strong id="hedefKelime" style="font-size:1.5rem;">---</strong></p>
      <button onclick="kontrolEt()" class="btn btn-success btn-sm">Kontrol Et</button>
      <span id="sonucMesaji" class="ms-2"></span>
      <button onclick="yeniKelime()" class="btn btn-outline-secondary btn-sm float-end">Yeni Kelime</button>
    </div>
  </div>

  <!-- PDF İndir Butonu -->
  <div class="text-center mb-4">
    <button onclick="indirPDF()" class="btn btn-warning"><i class="bi bi-file-earmark-pdf"></i> PDF Olarak Kaydet</button>
  </div>
</div>

<!-- Ana Sayfa Butonu -->
<a href="index.html" class="btn btn-warning back-home-btn" title="Ana Sayfaya Dön">
  <i class="bi bi-house-door-fill"></i>
</a>

<!-- JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  // 1. Harf Bilgileri
  const harfBilgileri = {
    "ا": "Elif – Genellikle başta kullanılır.",
    "ب": "Be – Dudak sesi. Başta: بـ Ortada: ـبـ Sonda: ـب",
    "ت": "Te – Diş sesi.",
    "ث": "Se – İnce diş sesi.",
    "ج": "Cim – Boğazdan gelen ‘c’ sesi.",
    "ح": "Ha – Hırıltılı ‘h’ sesi.",
    "خ": "Hı – Kalın ‘h’ sesi.",
    "د": "Dal – D sesi.",
    "ذ": "Zel – Z sesi (ince).",
    "ر": "Re – R sesi.",
    "ز": "Ze – Sert Z.",
    "س": "Sin – S sesi.",
    "ش": "Şin – Ş sesi.",
    "ص": "Sad – Kalın S.",
    "ض": "Dad – Kalın D.",
    "ط": "Tı – Kalın T.",
    "ظ": "Zı – Kalın Z.",
    "ع": "Ayn – Boğazdan gelen ses.",
    "غ": "Gayn – Gırtlaktan gelen g sesi.",
    "ف": "Fe – F sesi.",
    "ق": "Kaf – Kalın K.",
    "ك": "Kef – İnce K.",
    "ل": "Lam – L sesi.",
    "م": "Mim – M sesi.",
    "ن": "Nun – N sesi.",
    "ه": "He – H sesi.",
    "و": "Vav – V veya U/O sesi.",
    "ي": "Ye – Y sesi.",
    "ء": "Hemze – Durak sesi.",
    "،": "Virgül",
    ".": "Nokta",
    "◀": "Silme tuşu"
  };

  const harfler = Object.keys(harfBilgileri);

  const klavyeDiv = document.querySelector("#klavye .d-flex");

  const harfBilgiKutusu = document.getElementById("harfBilgiKutusu");
  const output = document.getElementById("outputArea");

  harfler.forEach(harf => {
    const btn = document.createElement("button");
    btn.className = "btn btn-outline-light fs-3";
    btn.textContent = harf;
    btn.onclick = () => {
      if (harf === "◀") {
        output.innerText = output.innerText.slice(0, -1);
      } else {
        output.innerText += harf;
      }
      harfBilgiKutusu.classList.remove("d-none");
      harfBilgiKutusu.textContent = harfBilgileri[harf] || "";
    };
    klavyeDiv.appendChild(btn);
  });

  // 2. Alıştırma Sistemi
  const kelimeler = ["كتاب", "مدرسة", "قلم", "مكتبة", "تاريخ", "لغة", "مسجد", "سؤال"];
  const hedef = document.getElementById("hedefKelime");
  const sonuc = document.getElementById("sonucMesaji");

  function yeniKelime() {
    const kelime = kelimeler[Math.floor(Math.random() * kelimeler.length)];
    hedef.textContent = kelime;
    sonuc.textContent = "";
    output.innerText = "";
  }
  yeniKelime();

  function kontrolEt() {
    const giris = output.innerText.trim();
    if (giris === hedef.textContent.trim()) {
      sonuc.textContent = "✅ Doğru yazdınız!";
      sonuc.className = "text-success fw-bold";
    } else {
      sonuc.textContent = "❌ Yanlış! Tekrar deneyin.";
      sonuc.className = "text-danger fw-bold";
    }
  }

  // 4. PDF Kaydetme
  async function indirPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFont("times", "normal");
    doc.text(output.innerText, 20, 30, { align: "right" });
    doc.save("osmanlica-yazim.pdf");
  }
</script>

<style>
  .back-home-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    font-size: 1.6rem;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    background-color: #c9a343;
    color: #000;
    border: none;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: transform 0.2s, box-shadow 0.2s;
  }
  .back-home-btn:hover {
    transform: scale(1.1);
    background-color: #e5c06d;
    color: #000;
  }
</style>

</body>
</html>

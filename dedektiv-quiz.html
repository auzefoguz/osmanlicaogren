<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Osmanlı Dedektifi - Gelişmiş</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Lateef&family=Scheherazade+New&display=swap');

    body {
      font-family: 'Scheherazade New', 'Lateef', serif;
      background: url('https://upload.wikimedia.org/wikipedia/commons/8/80/Old_paper_texture.jpg') repeat;
      background-size: cover;
      color: #3b2f00;
      text-align: center;
    }
    main {
      max-width: 800px;
      margin: 2rem auto;
      background: rgba(255, 249, 231, 0.92);
      border-radius: 20px;
      padding: 2rem;
      border: 5px double #6b4f00;
      box-shadow: 0 0 20px #7a5c0055;
      position: relative;
    }
    header {
      font-size: 2.8rem;
      font-weight: bold;
      text-shadow: 2px 2px 5px #7a5c00;
      margin-bottom: 1rem;
    }
    #section {
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    #story {
      font-style: italic;
      margin: 1rem 0;
      line-height: 1.6;
    }
    #question {
      font-size: 2rem;
      font-weight: bold;
      margin: 1rem 0;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 1rem 0;
    }
    li {
      background: #f8e3a0;
      margin: 0.5rem auto;
      padding: 0.8rem 1.2rem;
      border-radius: 10px;
      cursor: pointer;
      width: fit-content;
      transition: 0.3s;
    }
    li:hover {
      background: #c79e44;
      color: white;
    }
    li.selected {
      background: #3b2f00;
      color: #fff7d6;
    }
    #feedback {
      margin: 1rem 0;
      font-weight: bold;
      min-height: 60px;
    }
    button {
      background: #6b4f00;
      color: #fff7d6;
      border: none;
      padding: 0.8rem 2rem;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.2rem;
      transition: 0.3s;
      margin: 0.5rem;
    }
    button:disabled {
      background: #aaa;
      cursor: not-allowed;
    }
    button:hover:enabled {
      background: #3b2f00;
    }
    #result {
      margin-top: 2rem;
      font-size: 1.5rem;
      white-space: pre-line;
    }
    #secret {
      display: none;
      background: #fff7d6;
      border: 2px dashed #6b4f00;
      padding: 1rem;
      border-radius: 8px;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
<main>
  <header>🕌 Osmanlı Dedektifi: Kayıp Ferman</header>
  <div id="section"></div>
  <div id="story"></div>
  <div id="question"></div>
  <ul id="options"></ul>
  <div id="feedback"></div>
  <button id="next-btn" disabled>Sonraki Bölüm</button>
  <button id="mute-btn">🔊 Müzik Kapat</button>
  <div id="secret"></div>
  <div id="result"></div>
</main>

<audio id="bg-music" src="sounds/ney.mp3" loop autoplay></audio>

<script>
  const quizData = [
    { section: "Bölüm 1", story: "Dedektif Ali gizli fermanın ilk parçasını bulmak için sarayda araştırma yapıyor.", question: "‘كتاب’ kelimesinin anlamı nedir?", options: [{ text: "Kitap", correct: true, explanation: "Doğru!" }, { text: "Kalem", correct: false, explanation: "Yanlış." }], secret: "📜 İlk ipucu!" },
    { section: "Bölüm 2", story: "Bir cümlede eksik kelime: '... ile kapı açılır'.", question: "Hangi kelime?", options: [{ text: "با", correct: true, explanation: "Doğru!" }, { text: "قلم", correct: false, explanation: "Yanlış." }], secret: "🔑 Kapı açıldı." },
    { section: "Bölüm 3", story: "Kazınmış yazı: ‘قلم’", question: "Bu kelimenin anlamı?", options: [{ text: "Kalem", correct: true, explanation: "Doğru!" }, { text: "Kitap", correct: false, explanation: "Yanlış." }], secret: "✒️ Kalem ipucu!" },
    { section: "Bölüm 4", story: "Şifre: 'Bilgeliğin yuvası...'", question: "Hangi kelime?", options: [{ text: "مدرسة", correct: true, explanation: "Doğru!" }, { text: "قلم", correct: false, explanation: "Yanlış." }], secret: "🏫 Okul bulundu." },
    { section: "Bölüm 5", story: "Sandık üstü yazı: ‘سيف’", question: "Anlamı?", options: [{ text: "Kılıç", correct: true, explanation: "Doğru!" }, { text: "Kitap", correct: false, explanation: "Yanlış." }], secret: "⚔️ Kılıç fermanı koruyor!" }
  ];

  const bgMusic = document.getElementById('bg-music');
  const muteBtn = document.getElementById('mute-btn');
  let isMuted = false;

  muteBtn.onclick = () => {
    isMuted = !isMuted;
    bgMusic.muted = isMuted;
    muteBtn.textContent = isMuted ? "🔇 Müzik Aç" : "🔊 Müzik Kapat";
  };

  const sectionEl = document.getElementById('section');
  const storyEl = document.getElementById('story');
  const questionEl = document.getElementById('question');
  const optionsEl = document.getElementById('options');
  const feedbackEl = document.getElementById('feedback');
  const nextBtn = document.getElementById('next-btn');
  const secretEl = document.getElementById('secret');
  const resultEl = document.getElementById('result');

  let currentIndex = 0, score = 0;

  function renderQuestion() {
    nextBtn.disabled = true;
    feedbackEl.textContent = '';
    secretEl.style.display = 'none';
    secretEl.textContent = '';

    const current = quizData[currentIndex];
    sectionEl.textContent = current.section;
    storyEl.textContent = current.story;
    questionEl.textContent = current.question;
    optionsEl.innerHTML = '';

    current.options.forEach(opt => {
      const li = document.createElement('li');
      li.textContent = opt.text;
      li.onclick = () => {
        if (li.classList.contains('selected')) return;
        li.classList.add('selected');
        if (opt.correct) { score++; feedbackEl.textContent = `✅ ${opt.explanation}`; }
        else { feedbackEl.textContent = `❌ ${opt.explanation}`; }
        nextBtn.disabled = false;
        [...optionsEl.children].forEach(el => el.style.pointerEvents = 'none');
        secretEl.style.display = 'block'; secretEl.textContent = current.secret;
      };
      optionsEl.appendChild(li);
    });
  }

  nextBtn.onclick = () => {
    currentIndex++;
    if (currentIndex < quizData.length) renderQuestion();
    else { sectionEl.style.display = storyEl.style.display = questionEl.style.display = optionsEl.style.display = feedbackEl.style.display = nextBtn.style.display = secretEl.style.display = 'none'; resultEl.textContent = `🎉 Tebrikler! ${score}/5`; }
  };

  renderQuestion();
</script>
</body>
</html>

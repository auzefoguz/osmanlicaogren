<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üïµÔ∏è Osmanlƒ±ca Dedektif Quiz</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Lateef&display=swap');

  body {
    font-family: 'Lateef', serif, Arial, sans-serif;
    background: #fdf9f3;
    color: #1a3b5d;
    margin: 0; padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  main {
    background: #fffdf9;
    max-width: 720px;
    border-radius: 15px;
    box-shadow: 0 0 30px rgba(0,0,0,0.12);
    padding: 2rem 2.5rem 3rem;
    position: relative;
  }
  header {
    font-size: 2.5rem;
    font-weight: 700;
    color: #a67c00;
    text-align: center;
    text-shadow: 0 0 3px #7a5c00;
    margin-bottom: 1.5rem;
    letter-spacing: 3px;
  }
  #story {
    font-style: italic;
    font-size: 1.2rem;
    color: #444;
    margin-bottom: 1.8rem;
    min-height: 120px;
    line-height: 1.5;
    border-left: 4px solid #a67c00;
    padding-left: 1rem;
    background: #fff7cc88;
    border-radius: 8px;
  }
  #question {
    font-size: 2rem;
    font-weight: 900;
    margin-bottom: 1rem;
    min-height: 80px;
    color: #4b3200;
    text-shadow: 0 1px 2px #f0e68c88;
    display: flex;
    align-items: center;
    gap: 0.8rem;
  }
  #question svg {
    width: 36px;
    height: 36px;
    fill: #a67c00;
  }
  ul.options {
    list-style: none;
    padding: 0;
    margin-bottom: 1.5rem;
    max-height: 320px;
    overflow-y: auto;
  }
  ul.options::-webkit-scrollbar {
    width: 8px;
  }
  ul.options::-webkit-scrollbar-thumb {
    background-color: #a67c00cc;
    border-radius: 4px;
  }
  ul.options li {
    background: #fef8d8;
    border: 2px solid transparent;
    margin-bottom: 1rem;
    padding: 1rem 1.3rem;
    border-radius: 14px;
    cursor: pointer;
    font-size: 1.4rem;
    font-weight: 600;
    transition: background-color 0.3s, border-color 0.3s;
    box-shadow: 1px 1px 4px #e2d48f88;
    display: flex;
    align-items: center;
    gap: 0.7rem;
  }
  ul.options li:hover {
    background-color: #a67c00;
    color: white;
    border-color: #7a5c00;
  }
  ul.options li.selected {
    background-color: #4b3200;
    color: #f7e58d;
    font-weight: 900;
    border-color: #a67c00;
    box-shadow: 0 0 10px #b39b00;
  }
  #feedback {
    background: #fff4b7;
    border-left: 6px solid #a67c00;
    padding: 1rem 1.2rem;
    font-weight: 700;
    font-size: 1.1rem;
    color: #6b4f00;
    border-radius: 8px;
    min-height: 60px;
    margin-bottom: 1.8rem;
    box-shadow: 1px 1px 5px #a67c0033;
  }
  button#next-btn {
    background-color: #a67c00;
    color: #fffdf9;
    border: none;
    padding: 1rem 2.2rem;
    font-size: 1.3rem;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 900;
    letter-spacing: 1px;
    transition: background-color 0.3s;
    box-shadow: 0 3px 7px #7a5c0055;
    user-select: none;
    display: block;
    margin: 0 auto 1rem;
  }
  button#next-btn:disabled {
    background-color: #d4c57f88;
    cursor: not-allowed;
    box-shadow: none;
  }
  button#next-btn:hover:not(:disabled) {
    background-color: #7a5c00;
  }
  #result {
    margin-top: 2rem;
    font-size: 1.7rem;
    font-weight: 800;
    text-align: center;
    color: #4b3200;
    line-height: 1.4;
    white-space: pre-line;
  }

  /* Butonlar ikon ≈üeklinde ve k√º√ß√ºk, alt kƒ±sƒ±mda sabit */
  #controls {
    position: fixed;
    bottom: 16px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 20px;
    z-index: 100;
  }
  #controls button {
    background: #a67c00;
    border: none;
    color: white;
    font-size: 1.8rem;
    border-radius: 50%;
    width: 48px;
    height: 48px;
    cursor: pointer;
    box-shadow: 0 3px 7px #7a5c0055;
    transition: background-color 0.3s;
    user-select: none;
  }
  #controls button:hover {
    background-color: #7a5c00;
  }

</style>
</head>
<body>
<main>
  <header>üïµÔ∏è Osmanlƒ±ca Dedektif Gizemi</header>
  <div id="story"></div>
  <div id="question">
    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
      <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm0 16a2 2 0 1 1 2-2 2 2 0 0 1-2 2Zm2-6h-4v-6h4Z"/>
    </svg>
    <span id="question-text"></span>
  </div>
  <ul class="options" id="options"></ul>
  <div id="feedback"></div>
  <button id="next-btn" disabled>Sonraki ƒ∞pucu</button>
  <div id="result"></div>
</main>

<div id="controls">
  <button id="home-btn" title="Ana Sayfa" aria-label="Ana Sayfa">üè†</button>
  <button id="restart-btn" title="Yeniden Ba≈ülat" aria-label="Yeniden Ba≈ülat">üîÑ</button>
  <button id="finish-btn" title="Bitir" aria-label="Bitir">‚èπÔ∏è</button>
</div>

<audio id="background-music" loop>
  <source src="haunting-middle-eastern-piece-188714.mp3" type="audio/mpeg" />
  Tarayƒ±cƒ±nƒ±z audio elementini desteklemiyor.
</audio>

<script>
  // 25 kelime, 5 b√∂l√ºm (her b√∂l√ºm 5 kelime)
  const allWords = [
    { word: "ÿßŸÇŸÖÿßÿ±", transliteration: "AqmƒÅr", meaning: "Aylar", explanation: "‚ÄòÿßŸÇŸÖÿßÿ±‚Äô kelimesi Osmanlƒ±ca‚Äôda ‚ÄòAylar‚Äô demektir." },
    { word: "ŸÉÿ™ÿßÿ®", transliteration: "KitƒÅb", meaning: "Kitap", explanation: "‚ÄòŸÉÿ™ÿßÿ®‚Äô kelimesi ‚ÄòKitap‚Äô anlamƒ±na gelir." },
    { word: "ÿ≥ŸäŸÅ", transliteration: "Sayf", meaning: "Kƒ±lƒ±√ß", explanation: "‚Äòÿ≥ŸäŸÅ‚Äô kelimesi ‚ÄòKƒ±lƒ±√ß‚Äô anlamƒ±na gelir." },
    { word: "ŸÇŸÑŸÖ", transliteration: "Qalam", meaning: "Kalem", explanation: "‚ÄòŸÇŸÑŸÖ‚Äô kelimesi ‚ÄòKalem‚Äô demektir." },
    { word: "ŸÖÿØÿ±ÿ≥ÿ©", transliteration: "Madrasa", meaning: "Okul", explanation: "‚ÄòŸÖÿØÿ±ÿ≥ÿ©‚Äô kelimesi ‚ÄòOkul‚Äô anlamƒ±ndadƒ±r." },

    { word: "ŸÜŸàÿ±", transliteration: "N≈´r", meaning: "I≈üƒ±k", explanation: "‚ÄòŸÜŸàÿ±‚Äô kelimesi ‚ÄòI≈üƒ±k‚Äô anlamƒ±na gelir." },
    { word: "ÿ®ÿ≠ÿ±", transliteration: "Ba·∏•r", meaning: "Deniz", explanation: "‚Äòÿ®ÿ≠ÿ±‚Äô kelimesi ‚ÄòDeniz‚Äô demektir." },
    { word: "ŸÇÿµÿ±", transliteration: "Qa·π£r", meaning: "Saray", explanation: "‚ÄòŸÇÿµÿ±‚Äô kelimesi ‚ÄòSaray‚Äô anlamƒ±na gelir." },
    { word: "ÿ≠ÿØŸäŸÇÿ©", transliteration: "·∏§adƒ´qa", meaning: "Bah√ße", explanation: "‚Äòÿ≠ÿØŸäŸÇÿ©‚Äô kelimesi ‚ÄòBah√ße‚Äô demektir." },
    { word: "ŸÖÿØŸäŸÜÿ©", transliteration: "Madƒ´na", meaning: "≈ûehir", explanation: "‚ÄòŸÖÿØŸäŸÜÿ©‚Äô kelimesi ‚Äò≈ûehir‚Äô anlamƒ±ndadƒ±r." },

    { word: "ÿµŸÇÿ±", transliteration: "·π¢aqr", meaning: "≈ûahin", explanation: "‚ÄòÿµŸÇÿ±‚Äô kelimesi ‚Äò≈ûahin‚Äô demektir." },
    { word: "ÿ∞Ÿáÿ®", transliteration: "Dhahab", meaning: "Altƒ±n", explanation: "‚Äòÿ∞Ÿáÿ®‚Äô kelimesi ‚ÄòAltƒ±n‚Äô anlamƒ±na gelir." },
    { word: "ÿ±ÿ¨ŸÑ", transliteration: "Rajul", meaning: "Adam", explanation: "‚Äòÿ±ÿ¨ŸÑ‚Äô kelimesi ‚ÄòAdam‚Äô demektir." },
    { word: "ÿπŸäŸÜ", transliteration: " øAyn", meaning: "G√∂z", explanation: "‚ÄòÿπŸäŸÜ‚Äô kelimesi ‚ÄòG√∂z‚Äô anlamƒ±na gelir." },
    { word: "ŸÇŸÑŸÖ", transliteration: "Qalam", meaning: "Kalem", explanation: "‚ÄòŸÇŸÑŸÖ‚Äô kelimesi ‚ÄòKalem‚Äô demektir." },

    { word: "ŸÑŸäŸÑ", transliteration: "Layl", meaning: "Gece", explanation: "‚ÄòŸÑŸäŸÑ‚Äô kelimesi ‚ÄòGece‚Äô anlamƒ±na gelir." },
    { word: "ÿ¥ŸÖÿ≥", transliteration: "Shams", meaning: "G√ºne≈ü", explanation: "‚Äòÿ¥ŸÖÿ≥‚Äô kelimesi ‚ÄòG√ºne≈ü‚Äô demektir." },
    { word: "ŸÜŸàÿ±", transliteration: "N≈´r", meaning: "I≈üƒ±k", explanation: "‚ÄòŸÜŸàÿ±‚Äô kelimesi ‚ÄòI≈üƒ±k‚Äô anlamƒ±na gelir." },
    { word: "ŸÇŸÖÿ±", transliteration: "Qamar", meaning: "Ay", explanation: "‚ÄòŸÇŸÖÿ±‚Äô kelimesi ‚ÄòAy‚Äô demektir." },
    { word: "ÿ®Ÿäÿ™", transliteration: "Bayt", meaning: "Ev", explanation: "‚Äòÿ®Ÿäÿ™‚Äô kelimesi ‚ÄòEv‚Äô anlamƒ±ndadƒ±r." },

    { word: "ŸÉÿ™ÿßÿ®", transliteration: "KitƒÅb", meaning: "Kitap", explanation: "‚ÄòŸÉÿ™ÿßÿ®‚Äô kelimesi ‚ÄòKitap‚Äô anlamƒ±na gelir." },
    { word: "ŸÖÿØŸäŸÜÿ©", transliteration: "Madƒ´na", meaning: "≈ûehir", explanation: "‚ÄòŸÖÿØŸäŸÜÿ©‚Äô kelimesi ‚Äò≈ûehir‚Äô anlamƒ±ndadƒ±r." },
    { word: "ŸÇÿµÿ±", transliteration: "Qa·π£r", meaning: "Saray", explanation: "‚ÄòŸÇÿµÿ±‚Äô kelimesi ‚ÄòSaray‚Äô anlamƒ±na gelir." },
    { word: "ÿ®ÿ≠ÿ±", transliteration: "Ba·∏•r", meaning: "Deniz", explanation: "‚Äòÿ®ÿ≠ÿ±‚Äô kelimesi ‚ÄòDeniz‚Äô demektir." },
    { word: "ÿ≠ÿØŸäŸÇÿ©", transliteration: "·∏§adƒ´qa", meaning: "Bah√ße", explanation: "‚Äòÿ≠ÿØŸäŸÇÿ©‚Äô kelimesi ‚ÄòBah√ße‚Äô demektir." }
  ];

  // Hikaye b√∂l√ºmleri (5 b√∂l√ºm)
  const chapters = [
    `üìú Eski Osmanlƒ± ar≈üivinde ba≈ülayan gizemli dava. Dedektifimiz ilk ipucuna ula≈ütƒ±.`,
    `üï∞Ô∏è Tarih tozlarƒ± arasƒ±nda yeni ipu√ßlarƒ± ke≈üfediliyor. Dikkatli olmalƒ±!`,
    `‚úâÔ∏è Gizem derinle≈üiyor; mektuplar, yazmalar ve sƒ±rlar ortaya √ßƒ±kƒ±yor.`,
    `üìö Ar≈üiv odasƒ±nda gece yarƒ±sƒ±, kritik kelimeler dedektifi bekliyor.`,
    `üè´ Son ipucu bulundu. Osmanlƒ± sƒ±rlarƒ± √ß√∂z√ºlmek √ºzere...`
  ];

  const storyEl = document.getElementById("story");
  const questionEl = document.getElementById("question-text");
  const optionsEl = document.getElementById("options");
  const feedbackEl = document.getElementById("feedback");
  const nextBtn = document.getElementById("next-btn");
  const resultEl = document.getElementById("result");

  const homeBtn = document.getElementById("home-btn");
  const restartBtn = document.getElementById("restart-btn");
  const finishBtn = document.getElementById("finish-btn");

  let currentIndex = 0; // global soru indeksi (0-24)
  let score = 0;
  let answered = false;

  // M√ºzik kontrol
  const music = document.getElementById("background-music");
  music.volume = 0.15;
  music.play().catch(() => {
    // Otomatik √ßalma engellenirse kullanƒ±cƒ± etkile≈üimi bekle
    console.log("M√ºzik otomatik ba≈ülamadƒ±.");
  });

  function getChapterByIndex(idx) {
    return chapters[Math.floor(idx / 5)] || "";
  }

  // Rastgele 3 yanlƒ±≈ü se√ßenek getir
  function getWrongOptions(correctMeaning) {
    const allMeanings = allWords.map(k => k.meaning);
    const wrongs = allMeanings.filter(m => m !== correctMeaning);
    const shuffled = wrongs.sort(() => 0.5 - Math.random());
    return shuffled.slice(0, 3);
  }

  // Soru tipleri (kelime anlamƒ±, c√ºmlede hangi kelime?)
  function generateQuestion(wordObj) {
    // %50 ihtimal ile anlam sorusu, %50 c√ºmlede eksik kelime sorusu
    if(Math.random() < 0.5){
      return {
        type: "meaning",
        question: `Bu kelimenin anlamƒ± nedir? (${wordObj.transliteration})`,
        correctAnswer: wordObj.meaning,
        explanation: wordObj.explanation
      };
    } else {
      // C√ºmlede bo≈üluk bƒ±rak ve doƒüru kelimeyi sor
      const sentence = `Dedektifin notlarƒ±nda ≈üu c√ºmle yer alƒ±yor: "Bug√ºn ${wordObj.meaning} √ßok √∂nemli." Hangi kelime eksiktir?`;
      return {
        type: "missing_word",
        question: sentence,
        correctAnswer: wordObj.word,
        explanation: `Doƒüru kelime: '${wordObj.word}' (${wordObj.transliteration})`
      };
    }
  }

  function renderQuestion() {
    answered = false;
    feedbackEl.textContent = "";
    nextBtn.disabled = true;
    optionsEl.innerHTML = "";

    const chapter = getChapterByIndex(currentIndex);
    storyEl.textContent = chapter;

    const wordObj = allWords[currentIndex];
    const qData = generateQuestion(wordObj);

    questionEl.textContent = qData.question;

    // Doƒüru cevabƒ± ve 3 yanlƒ±≈ü se√ßeneƒüi hazƒ±rla
    let optionsTexts = [];
    if(qData.type === "meaning"){
      optionsTexts = [qData.correctAnswer].concat(getWrongOptions(qData.correctAnswer));
    } else {
      // eksik kelime sorusu, doƒüru kelime + 3 yanlƒ±≈ü kelime
      const allWordsList = allWords.map(w => w.word);
      const wrongWords = allWordsList.filter(w => w !== qData.correctAnswer).sort(() => 0.5 - Math.random()).slice(0,3);
      optionsTexts = [qData.correctAnswer].concat(wrongWords);
    }

    // Karƒ±≈üƒ±k sƒ±rala
    optionsTexts.sort(() => Math.random() - 0.5);

    optionsTexts.forEach(text => {
      const li = document.createElement("li");
      li.textContent = text;
      li.onclick = () => {
        if(answered) return;
        answered = true;
        li.classList.add("selected");

        // Kilitle diƒüerleri
        [...optionsEl.children].forEach(el => el.style.pointerEvents = "none");

        if(text === qData.correctAnswer){
          score++;
          feedbackEl.style.color = "#2a5d1a";
          feedbackEl.textContent = `‚úÖ Doƒüru! ${qData.explanation}`;
        } else {
          feedbackEl.style.color = "#a62a2a";
          feedbackEl.textContent = `‚ùå Yanlƒ±≈ü! Doƒüru cevap: ${qData.correctAnswer}`;
        }

        nextBtn.disabled = false;
      };
      optionsEl.appendChild(li);
    });
  }

  nextBtn.onclick = () => {
    currentIndex++;
    if(currentIndex >= allWords.length){
      showFinalResult();
    } else {
      renderQuestion();
    }
  };

  homeBtn.onclick = () => {
    location.reload();
  };

  restartBtn.onclick = () => {
    currentIndex = 0;
    score = 0;
    feedbackEl.textContent = "";
    resultEl.textContent = "";
    storyEl.style.display = "";
    questionEl.parentElement.style.display = "";
    optionsEl.style.display = "";
    feedbackEl.style.display = "";
    nextBtn.style.display = "";
    renderQuestion();
  };

  finishBtn.onclick = () => {
    showFinalResult();
  };

  function showFinalResult(){
    storyEl.style.display = "none";
    questionEl.parentElement.style.display = "none";
    optionsEl.style.display = "none";
    feedbackEl.style.display = "none";
    nextBtn.style.display = "none";

    let message = `üïµÔ∏è Osmanlƒ±ca Dedektif Gizemini √ß√∂zd√ºn!\n\nToplam ${allWords.length} ipucundan ${score} doƒüru cevap verdin.`;

    if(score === allWords.length){
      message += "\n\nüéâ Harika! T√ºm sƒ±rlarƒ± √ß√∂zd√ºn ve b√ºy√ºk bir Osmanlƒ±ca dedektifi oldun!";
    } else if(score >= allWords.length / 2){
      message += "\n\nüëç ƒ∞yi i≈ü √ßƒ±kardƒ±n, bazƒ± gizemler hala √ß√∂z√ºlmeyi bekliyor.";
    } else {
      message += "\n\nüòï Biraz daha √ßalƒ±≈ümalƒ±sƒ±n, Osmanlƒ±ca sƒ±rlarƒ± zorlu olabilir.";
    }

    resultEl.textContent = message;
  }

  // Ba≈ülangƒ±√ß
  renderQuestion();

</script>
</body>
</html>

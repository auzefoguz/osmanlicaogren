<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ•µï¸ OsmanlÄ±ca Dedektif Quiz</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Lateef&display=swap');

  body {
    font-family: 'Lateef', serif, Arial, sans-serif;
    background: #fdf9f3;
    color: #1a3b5d;
    margin: 0; padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  main {
    background: #fffdf9;
    max-width: 720px;
    border-radius: 15px;
    box-shadow: 0 0 30px rgba(0,0,0,0.12);
    padding: 2rem 2.5rem 3rem;
    position: relative;
  }
  header {
    font-size: 2.5rem;
    font-weight: 700;
    color: #a67c00;
    text-align: center;
    text-shadow: 0 0 3px #7a5c00;
    margin-bottom: 1.5rem;
    letter-spacing: 3px;
  }
  #story {
    font-style: italic;
    font-size: 1.2rem;
    color: #444;
    margin-bottom: 1.8rem;
    min-height: 120px;
    line-height: 1.5;
    border-left: 4px solid #a67c00;
    padding-left: 1rem;
    background: #fff7cc88;
    border-radius: 8px;
  }
  #question {
    font-size: 2rem;
    font-weight: 900;
    margin-bottom: 1rem;
    min-height: 80px;
    color: #4b3200;
    text-shadow: 0 1px 2px #f0e68c88;
    display: flex;
    align-items: center;
    gap: 0.8rem;
  }
  #question svg {
    width: 36px;
    height: 36px;
    fill: #a67c00;
  }
  ul.options {
    list-style: none;
    padding: 0;
    margin-bottom: 1.5rem;
    max-height: 320px;
    overflow-y: auto;
  }
  ul.options::-webkit-scrollbar {
    width: 8px;
  }
  ul.options::-webkit-scrollbar-thumb {
    background-color: #a67c00cc;
    border-radius: 4px;
  }
  ul.options li {
    background: #fef8d8;
    border: 2px solid transparent;
    margin-bottom: 1rem;
    padding: 1rem 1.3rem;
    border-radius: 14px;
    cursor: pointer;
    font-size: 1.4rem;
    font-weight: 600;
    transition: background-color 0.3s, border-color 0.3s;
    box-shadow: 1px 1px 4px #e2d48f88;
    display: flex;
    align-items: center;
    gap: 0.7rem;
  }
  ul.options li:hover {
    background-color: #a67c00;
    color: white;
    border-color: #7a5c00;
  }
  ul.options li.selected {
    background-color: #4b3200;
    color: #f7e58d;
    font-weight: 900;
    border-color: #a67c00;
    box-shadow: 0 0 10px #b39b00;
  }
  #feedback {
    background: #fff4b7;
    border-left: 6px solid #a67c00;
    padding: 1rem 1.2rem;
    font-weight: 700;
    font-size: 1.1rem;
    color: #6b4f00;
    border-radius: 8px;
    min-height: 60px;
    margin-bottom: 1.8rem;
    box-shadow: 1px 1px 5px #a67c0033;
  }
  button#next-btn {
    background-color: #a67c00;
    color: #fffdf9;
    border: none;
    padding: 1rem 2.2rem;
    font-size: 1.3rem;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 900;
    letter-spacing: 1px;
    transition: background-color 0.3s;
    box-shadow: 0 3px 7px #7a5c0055;
    user-select: none;
    display: block;
    margin: 0 auto 1rem;
  }
  button#next-btn:disabled {
    background-color: #d4c57f88;
    cursor: not-allowed;
    box-shadow: none;
  }
  button#next-btn:hover:not(:disabled) {
    background-color: #7a5c00;
  }
  #result {
    margin-top: 2rem;
    font-size: 1.7rem;
    font-weight: 800;
    text-align: center;
    color: #4b3200;
    line-height: 1.4;
    white-space: pre-line;
  }

  /* Butonlar ikon ÅŸeklinde ve kÃ¼Ã§Ã¼k, alt kÄ±sÄ±mda sabit */
  #controls {
    position: fixed;
    bottom: 16px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 20px;
    z-index: 100;
  }
  #controls button {
    background: #a67c00;
    border: none;
    color: white;
    font-size: 1.8rem;
    border-radius: 50%;
    width: 48px;
    height: 48px;
    cursor: pointer;
    box-shadow: 0 3px 7px #7a5c0055;
    transition: background-color 0.3s;
    user-select: none;
  }
  #controls button:hover {
    background-color: #7a5c00;
  }

</style>
</head>
<body>
<main>
  <header>ğŸ•µï¸ OsmanlÄ±ca Dedektif Gizemi</header>
  <div id="story"></div>
  <div id="question">
    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
      <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm0 16a2 2 0 1 1 2-2 2 2 0 0 1-2 2Zm2-6h-4v-6h4Z"/>
    </svg>
    <span id="question-text"></span>
  </div>
  <ul class="options" id="options"></ul>
  <div id="feedback"></div>
  <button id="next-btn" disabled>Sonraki Ä°pucu</button>
  <div id="result"></div>
</main>

<div id="controls">
  <button id="home-btn" title="Ana Sayfa" aria-label="Ana Sayfa">ğŸ </button>
  <button id="restart-btn" title="Yeniden BaÅŸlat" aria-label="Yeniden BaÅŸlat">ğŸ”„</button>
  <button id="finish-btn" title="Bitir" aria-label="Bitir">â¹ï¸</button>
</div>

<audio id="background-music" loop>
  <source src="haunting-middle-eastern-piece-188714.mp3" type="audio/mpeg" />
  TarayÄ±cÄ±nÄ±z audio elementini desteklemiyor.
</audio>

<script>
  // 25 kelime, 5 bÃ¶lÃ¼m (her bÃ¶lÃ¼m 5 kelime)
  const allWords = [
    { word: "Ø§Ù‚Ù…Ø§Ø±", transliteration: "AqmÄr", meaning: "Aylar", explanation: "â€˜Ø§Ù‚Ù…Ø§Ø±â€™ kelimesi OsmanlÄ±caâ€™da â€˜Aylarâ€™ demektir." },
    { word: "ÙƒØªØ§Ø¨", transliteration: "KitÄb", meaning: "Kitap", explanation: "â€˜ÙƒØªØ§Ø¨â€™ kelimesi â€˜Kitapâ€™ anlamÄ±na gelir." },
    { word: "Ø³ÙŠÙ", transliteration: "Sayf", meaning: "KÄ±lÄ±Ã§", explanation: "â€˜Ø³ÙŠÙâ€™ kelimesi â€˜KÄ±lÄ±Ã§â€™ anlamÄ±na gelir." },
    { word: "Ù‚Ù„Ù…", transliteration: "Qalam", meaning: "Kalem", explanation: "â€˜Ù‚Ù„Ù…â€™ kelimesi â€˜Kalemâ€™ demektir." },
    { word: "Ù…Ø¯Ø±Ø³Ø©", transliteration: "Madrasa", meaning: "Okul", explanation: "â€˜Ù…Ø¯Ø±Ø³Ø©â€™ kelimesi â€˜Okulâ€™ anlamÄ±ndadÄ±r." },

    { word: "Ù†ÙˆØ±", transliteration: "NÅ«r", meaning: "IÅŸÄ±k", explanation: "â€˜Ù†ÙˆØ±â€™ kelimesi â€˜IÅŸÄ±kâ€™ anlamÄ±na gelir." },
    { word: "Ø¨Ø­Ø±", transliteration: "Baá¸¥r", meaning: "Deniz", explanation: "â€˜Ø¨Ø­Ø±â€™ kelimesi â€˜Denizâ€™ demektir." },
    { word: "Ù‚ØµØ±", transliteration: "Qaá¹£r", meaning: "Saray", explanation: "â€˜Ù‚ØµØ±â€™ kelimesi â€˜Sarayâ€™ anlamÄ±na gelir." },
    { word: "Ø­Ø¯ÙŠÙ‚Ø©", transliteration: "á¸¤adÄ«qa", meaning: "BahÃ§e", explanation: "â€˜Ø­Ø¯ÙŠÙ‚Ø©â€™ kelimesi â€˜BahÃ§eâ€™ demektir." },
    { word: "Ù…Ø¯ÙŠÙ†Ø©", transliteration: "MadÄ«na", meaning: "Åehir", explanation: "â€˜Ù…Ø¯ÙŠÙ†Ø©â€™ kelimesi â€˜Åehirâ€™ anlamÄ±ndadÄ±r." },

    { word: "ØµÙ‚Ø±", transliteration: "á¹¢aqr", meaning: "Åahin", explanation: "â€˜ØµÙ‚Ø±â€™ kelimesi â€˜Åahinâ€™ demektir." },
    { word: "Ø°Ù‡Ø¨", transliteration: "Dhahab", meaning: "AltÄ±n", explanation: "â€˜Ø°Ù‡Ø¨â€™ kelimesi â€˜AltÄ±nâ€™ anlamÄ±na gelir." },
    { word: "Ø±Ø¬Ù„", transliteration: "Rajul", meaning: "Adam", explanation: "â€˜Ø±Ø¬Ù„â€™ kelimesi â€˜Adamâ€™ demektir." },
    { word: "Ø¹ÙŠÙ†", transliteration: "Ê¿Ayn", meaning: "GÃ¶z", explanation: "â€˜Ø¹ÙŠÙ†â€™ kelimesi â€˜GÃ¶zâ€™ anlamÄ±na gelir." },
    { word: "Ù‚Ù„Ù…", transliteration: "Qalam", meaning: "Kalem", explanation: "â€˜Ù‚Ù„Ù…â€™ kelimesi â€˜Kalemâ€™ demektir." },

    { word: "Ù„ÙŠÙ„", transliteration: "Layl", meaning: "Gece", explanation: "â€˜Ù„ÙŠÙ„â€™ kelimesi â€˜Geceâ€™ anlamÄ±na gelir." },
    { word: "Ø´Ù…Ø³", transliteration: "Shams", meaning: "GÃ¼neÅŸ", explanation: "â€˜Ø´Ù…Ø³â€™ kelimesi â€˜GÃ¼neÅŸâ€™ demektir." },
    { word: "Ù†ÙˆØ±", transliteration: "NÅ«r", meaning: "IÅŸÄ±k", explanation: "â€˜Ù†ÙˆØ±â€™ kelimesi â€˜IÅŸÄ±kâ€™ anlamÄ±na gelir." },
    { word: "Ù‚Ù…Ø±", transliteration: "Qamar", meaning: "Ay", explanation: "â€˜Ù‚Ù…Ø±â€™ kelimesi â€˜Ayâ€™ demektir." },
    { word: "Ø¨ÙŠØª", transliteration: "Bayt", meaning: "Ev", explanation: "â€˜Ø¨ÙŠØªâ€™ kelimesi â€˜Evâ€™ anlamÄ±ndadÄ±r." },

    { word: "ÙƒØªØ§Ø¨", transliteration: "KitÄb", meaning: "Kitap", explanation: "â€˜ÙƒØªØ§Ø¨â€™ kelimesi â€˜Kitapâ€™ anlamÄ±na gelir." },
    { word: "Ù…Ø¯ÙŠÙ†Ø©", transliteration: "MadÄ«na", meaning: "Åehir", explanation: "â€˜Ù…Ø¯ÙŠÙ†Ø©â€™ kelimesi â€˜Åehirâ€™ anlamÄ±ndadÄ±r." },
    { word: "Ù‚ØµØ±", transliteration: "Qaá¹£r", meaning: "Saray", explanation: "â€˜Ù‚ØµØ±â€™ kelimesi â€˜Sarayâ€™ anlamÄ±na gelir." },
    { word: "Ø¨Ø­Ø±", transliteration: "Baá¸¥r", meaning: "Deniz", explanation: "â€˜Ø¨Ø­Ø±â€™ kelimesi â€˜Denizâ€™ demektir." },
    { word: "Ø­Ø¯ÙŠÙ‚Ø©", transliteration: "á¸¤adÄ«qa", meaning: "BahÃ§e", explanation: "â€˜Ø­Ø¯ÙŠÙ‚Ø©â€™ kelimesi â€˜BahÃ§eâ€™ demektir." }
  ];

  // Hikaye bÃ¶lÃ¼mleri (5 bÃ¶lÃ¼m)
  const chapters = [
    `ğŸ“œ Eski OsmanlÄ± arÅŸivinde baÅŸlayan gizemli dava. Dedektifimiz ilk ipucuna ulaÅŸtÄ±.`,
    `ğŸ•°ï¸ Tarih tozlarÄ± arasÄ±nda yeni ipuÃ§larÄ± keÅŸfediliyor. Dikkatli olmalÄ±!`,
    `âœ‰ï¸ Gizem derinleÅŸiyor; mektuplar, yazmalar ve sÄ±rlar ortaya Ã§Ä±kÄ±yor.`,
    `ğŸ“š ArÅŸiv odasÄ±nda gece yarÄ±sÄ±, kritik kelimeler dedektifi bekliyor.`,
    `ğŸ« Son ipucu bulundu. OsmanlÄ± sÄ±rlarÄ± Ã§Ã¶zÃ¼lmek Ã¼zere...`
  ];

  const storyEl = document.getElementById("story");
  const questionEl = document.getElementById("question-text");
  const optionsEl = document.getElementById("options");
  const feedbackEl = document.getElementById("feedback");
  const nextBtn = document.getElementById("next-btn");
  const resultEl = document.getElementById("result");

  const homeBtn = document.getElementById("home-btn");
  const restartBtn = document.getElementById("restart-btn");
  const finishBtn = document.getElementById("finish-btn");

  let currentIndex = 0; // global soru indeksi (0-24)
  let score = 0;
  let answered = false;

  // MÃ¼zik kontrol
  const music = document.getElementById("background-music");
  music.volume = 0.15;
  music.play().catch(() => {
    // Otomatik Ã§alma engellenirse kullanÄ±cÄ± etkileÅŸimi bekle
    console.log("MÃ¼zik otomatik baÅŸlamadÄ±.");
  });

  function getChapterByIndex(idx) {
    return chapters[Math.floor(idx / 5)] || "";
  }

  // Rastgele 3 yanlÄ±ÅŸ seÃ§enek getir
  function getWrongOptions(correctMeaning) {
    const allMeanings = allWords.map(k => k.meaning);
    const wrongs = allMeanings.filter(m => m !== correctMeaning);
    const shuffled = wrongs.sort(() => 0.5 - Math.random());
    return shuffled.slice(0, 3);
  }

  // Soru tipleri (kelime anlamÄ±, cÃ¼mlede hangi kelime?)
  function generateQuestion(wordObj) {
    // %50 ihtimal ile anlam sorusu, %50 cÃ¼mlede eksik kelime sorusu
    if(Math.random() < 0.5){
      return {
        type: "meaning",
        question: `Bu kelimenin anlamÄ± nedir? (${wordObj.transliteration})`,
        correctAnswer: wordObj.meaning,
        explanation: wordObj.explanation
      };
    } else {
      // CÃ¼mlede boÅŸluk bÄ±rak ve doÄŸru kelimeyi sor
      const sentence = `Dedektifin notlarÄ±nda ÅŸu cÃ¼mle yer alÄ±yor: "BugÃ¼n ${wordObj.meaning} Ã§ok Ã¶nemli." Hangi kelime eksiktir?`;
      return {
        type: "missing_word",
        question: sentence,
        correctAnswer: wordObj.word,
        explanation: `DoÄŸru kelime: '${wordObj.word}' (${wordObj.transliteration})`
      };
    }
  }

  function renderQuestion() {
    answered = false;
    feedbackEl.textContent = "";
    nextBtn.disabled = true;
    optionsEl.innerHTML = "";

    const chapter = getChapterByIndex(currentIndex);
    storyEl.textContent = chapter;

    const wordObj = allWords[currentIndex];
    const qData = generateQuestion(wordObj);

    questionEl.textContent = qData.question;

    // DoÄŸru cevabÄ± ve 3 yanlÄ±ÅŸ seÃ§eneÄŸi hazÄ±rla
    let optionsTexts = [];
    if(qData.type === "meaning"){
      optionsTexts = [qData.correctAnswer].concat(getWrongOptions(qData.correctAnswer));
    } else {
      // eksik kelime sorusu, doÄŸru kelime + 3 yanlÄ±ÅŸ kelime
      const allWordsList = allWords.map(w => w.word);
      const wrongWords = allWordsList.filter(w => w !== qData.correctAnswer).sort(() => 0.5 - Math.random()).slice(0,3);
      optionsTexts = [qData.correctAnswer].concat(wrongWords);
    }

    // KarÄ±ÅŸÄ±k sÄ±rala
    optionsTexts.sort(() => Math.random() - 0.5);

    optionsTexts.forEach(text => {
      const li = document.createElement("li");
      li.textContent = text;
      li.onclick = () => {
        if(answered) return;
        answered = true;
        li.classList.add("selected");

        // Kilitle diÄŸerleri
        [...optionsEl.children].forEach(el => el.style.pointerEvents = "none");

        if(text === qData.correctAnswer){
          score++;
          feedbackEl.style.color = "#2a5d1a";
          feedbackEl.textContent = `âœ… DoÄŸru! ${qData.explanation}`;
        } else {
          feedbackEl.style.color = "#a62a2a";
          feedbackEl.textContent = `âŒ YanlÄ±ÅŸ! DoÄŸru cevap: ${qData.correctAnswer}`;
        }

        nextBtn.disabled = false;
      };
      optionsEl.appendChild(li);
    });
  }

  nextBtn.onclick = () => {
    currentIndex++;
    if(currentIndex >= allWords.length){
      showFinalResult();
    } else {
      renderQuestion();
    }
  };

  homeBtn.onclick = () => {
    location.reload();
  };

  restartBtn.onclick = () => {
    currentIndex = 0;
    score = 0;
    feedbackEl.textContent = "";
    resultEl.textContent = "";
    storyEl.style.display = "";
    questionEl.parentElement.style.display = "";
    optionsEl.style.display = "";
    feedbackEl.style.display = "";
    nextBtn.style.display = "";
    renderQuestion();
  };

  finishBtn.onclick = () => {
    showFinalResult();
  };

  function showFinalResult(){
    storyEl.style.display = "none";
    questionEl.parentElement.style.display = "none";
    optionsEl.style.display = "none";
    feedbackEl.style.display = "none";
    nextBtn.style.display = "none";

    let message = `ğŸ•µï¸ OsmanlÄ±ca Dedektif Gizemini Ã§Ã¶zdÃ¼n!\n\nToplam ${allWords.length} ipucundan ${score} doÄŸru cevap verdin.`;

    if(score === allWords.length){
      message += "\n\nğŸ‰ Harika! TÃ¼m sÄ±rlarÄ± Ã§Ã¶zdÃ¼n ve bÃ¼yÃ¼k bir OsmanlÄ±ca dedektifi oldun!";
    } else if(score >= allWords.length / 2){
      message += "\n\nğŸ‘ Ä°yi iÅŸ Ã§Ä±kardÄ±n, bazÄ± gizemler hala Ã§Ã¶zÃ¼lmeyi bekliyor.";
    } else {
      message += "\n\nğŸ˜• Biraz daha Ã§alÄ±ÅŸmalÄ±sÄ±n, OsmanlÄ±ca sÄ±rlarÄ± zorlu olabilir.";
    }

    resultEl.textContent = message;
  }

  // BaÅŸlangÄ±Ã§
  renderQuestion();

</script>
</body>
</html>

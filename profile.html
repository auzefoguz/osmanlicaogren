<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Profilim | Osmanlıca Öğren</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--bs-body-bg);
      color: var(--bs-body-color);
      transition: background 0.4s, color 0.4s;
    }
    .profile-card {
      max-width: 430px;
      margin: 0 auto;
      background: var(--bs-card-bg);
      border-radius: 1.2rem;
      box-shadow: 0 4px 24px rgba(0,0,0,0.08);
      padding: 2.5rem 2rem 2rem 2rem;
      text-align: center;
      position: relative;
    }
    .avatar {
      width: 128px;
      height: 128px;
      border-radius: 50%;
      object-fit: cover;
      border: 5px solid var(--bs-primary);
      margin-bottom: 1rem;
    }
    .edit-btn {
      cursor: pointer;
      color: var(--bs-primary);
      font-size: 1.1rem;
      margin-left: 0.5rem;
    }
    .badge-premium {
      background: linear-gradient(90deg, #ffe066, #fff3bf);
      color: #6c4e00;
      font-weight: 600;
      border-radius: 1rem;
      padding: 0.35em 1.1em;
      margin-left: 0.4em;
      font-size: 1em;
    }
    .theme-toggle {
      position: absolute;
      top: 1.1rem;
      right: 1.1rem;
      background: transparent;
      border: none;
      font-size: 1.5rem;
      color: var(--bs-secondary);
      cursor: pointer;
      z-index: 10;
    }
    .stats-row .card {
      border-radius: 1rem;
      min-width: 130px;
      margin-bottom: 1rem;
    }
    .rozetler-area {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
    }
    .rozet-badge {
      font-size: 1em;
      cursor: pointer;
      transition: transform 0.15s;
    }
    .rozet-badge:hover {
      transform: scale(1.08) rotate(-5deg);
    }
    .custom-tooltip {
      --bs-tooltip-bg: #212529;
      --bs-tooltip-color: #ffc107;
    }
    @media (max-width: 575px) {
      .profile-card {
        padding: 1.2rem 0.5rem;
      }
      .stats-row {
        flex-direction: column;
        gap: 0;
      }
    }
  </style>
</head>
<body data-bs-theme="light">
  <main class="container py-4">
    <section class="profile-card shadow">
      <button id="themeToggle" class="theme-toggle" aria-label="Tema değiştir">
        <i id="themeIcon" class="bi bi-moon"></i>
      </button>
      <img id="avatar" class="avatar" src="https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png" alt="Profil resmi">
      <div>
        <label for="avatarInput" class="edit-btn" title="Profil fotoğrafını değiştir">
          <i class="bi bi-pencil-square"></i>
        </label>
        <input type="file" accept="image/*" id="avatarInput" style="display:none">
      </div>
      <h2 id="adSoyad" class="mt-2 mb-0" contenteditable="true" spellcheck="false" aria-label="Adınızı düzenleyin" tabindex="0">Ad Soyad</h2>
      <p id="eposta" class="text-secondary mb-1" contenteditable="true" spellcheck="false" aria-label="Eposta adresinizi düzenleyin" tabindex="0">mail@example.com</p>
      <span id="premiumBadge" class="badge-premium d-inline-flex align-items-center" style="display:none;">
        <i class="bi bi-star-fill me-1"></i> Premium Üye
      </span>
      <div class="mt-2">
        <span id="levelBadge" class="badge bg-primary fs-6">Seviye 1</span>
      </div>
    </section>

    <section class="row justify-content-center stats-row my-4 gy-2">
      <div class="col-12 col-sm-4">
        <div class="card text-center shadow-sm">
          <div class="card-body">
            <div class="fs-2 text-success" id="kelimeSayisi">0</div>
            <div class="fw-bold">Bilinen Kelime</div>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-4">
        <div class="card text-center shadow-sm">
          <div class="card-body">
            <div class="fs-2 text-info" id="quizSayisi">0</div>
            <div class="fw-bold">Çözülmüş Quiz</div>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-4">
        <div class="card text-center shadow-sm">
          <div class="card-body">
            <div class="fs-2 text-warning" id="basariOrani">0%</div>
            <div class="fw-bold">Başarı Oranı</div>
          </div>
        </div>
      </div>
    </section>

    <section class="card shadow-sm my-4">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h5 class="mb-0">Son Quizler</h5>
          <button class="btn btn-sm btn-outline-primary" id="refreshQuiz" title="Quizleri yenile"><i class="bi bi-arrow-repeat"></i></button>
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-hover align-middle mb-0">
            <thead>
              <tr>
                <th scope="col">Tarih</th>
                <th scope="col">Quiz</th>
                <th scope="col">Skor</th>
              </tr>
            </thead>
            <tbody id="quizTable"></tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="card shadow-sm my-4">
      <div class="card-body">
        <h5 class="mb-2">Kazanılan Rozetler</h5>
        <div id="rozetler" class="rozetler-area"></div>
      </div>
    </section>

    <section class="card shadow-sm my-4">
      <div class="card-body">
        <h5 class="mb-2">Günün Sözü</h5>
        <blockquote class="blockquote mb-0">
          <p id="gununSozu">...</p>
          <footer class="blockquote-footer" id="gununSozuYazar"></footer>
        </blockquote>
      </div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Varsayılan kullanıcı verisi
    const defaultUser = {
      ad: "Zeynep Aksoy",
      eposta: "zeynep@example.com",
      kelime: 180,
      quiz: 29,
      basariOrani: 86,
      seviye: 2,
      premium: true,
      profilResmi: "https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png",
      rozetler: [
        { kod: "ilk50", ad: "İlk 50 Kelime", aciklama: "İlk 50 kelimeyi öğrendi", icon: "bi-book", renk: "success" },
        { kod: "10quiz", ad: "10 Quiz Tamamlandı", aciklama: "10 farklı quiz çözdü", icon: "bi-clipboard-check", renk: "info" },
        { kod: "aktif", ad: "Aktif Öğrenci", aciklama: "7 gün üst üste giriş yaptı", icon: "bi-lightning-charge", renk: "warning" }
      ],
      quizler: [
        { tarih: "10 Ağustos", ad: "Kur 2 Testi", skor: "90%" },
        { tarih: "5 Ağustos", ad: "Sözlük Testi", skor: "80%" },
        { tarih: "2 Ağustos", ad: "Harf Bilgisi", skor: "100%" }
      ]
    };

    function loadUser() {
      return JSON.parse(localStorage.getItem("profilUser")) || defaultUser;
    }
    function saveUser(data) {
      localStorage.setItem("profilUser", JSON.stringify(data));
    }

    let user = loadUser();

    // Kişisel bilgiler
    function renderProfile() {
      document.getElementById("adSoyad").textContent = user.ad;
      document.getElementById("eposta").textContent = user.eposta;
      document.getElementById("avatar").src = user.profilResmi;
      document.getElementById("levelBadge").textContent = `Seviye ${user.seviye}`;
      document.getElementById("premiumBadge").style.display = user.premium ? "inline-flex" : "none";
    }

    // İstatistikler
    function renderStats() {
      document.getElementById("kelimeSayisi").textContent = user.kelime;
      document.getElementById("quizSayisi").textContent = user.quiz;
      document.getElementById("basariOrani").textContent = user.basariOrani + "%";
    }

    // Quiz Tablosu
    function renderQuizTable() {
      const tbody = document.getElementById("quizTable");
      tbody.innerHTML = "";
      user.quizler.forEach(q =>
        tbody.innerHTML += `<tr>
          <td>${q.tarih}</td>
          <td>${q.ad}</td>
          <td>${q.skor}</td>
        </tr>`
      );
    }

    // Rozetler
    function renderRozetler() {
      const area = document.getElementById("rozetler");
      area.innerHTML = "";
      user.rozetler.forEach(r => {
        area.innerHTML += `
          <span class="badge bg-${r.renk} rozet-badge" data-bs-toggle="tooltip" data-bs-title="${r.aciklama}">
            <i class="bi ${r.icon} me-1"></i> ${r.ad}
          </span>`;
      });
      // Bootstrap tooltip initialize
      const tooltipTriggerList = [].slice.call(area.querySelectorAll('[data-bs-toggle="tooltip"]'));
      tooltipTriggerList.map(el => new bootstrap.Tooltip(el, {customClass:'custom-tooltip'}));
    }

    // Günün Sözü
    function renderGununSozu() {
      const sozler = [
        { metin: "İlim Çin’de dahi olsa gidip alınız.", yazar: "Hz. Muhammed (s.a.v)" },
        { metin: "Marifet iltifata tabidir.", yazar: "Şeyh Edebali" },
        { metin: "Söz gümüşse sükût altındır.", yazar: "Osmanlı Atasözü" },
        { metin: "Adalet mülkün temelidir.", yazar: "Hz. Ömer (r.a.)" },
        { metin: "Kalpten çıkan söz kalbe gider.", yazar: "Mevlana" }
      ];
      const r = sozler[Math.floor(Math.random() * sozler.length)];
      document.getElementById("gununSozu").textContent = `"${r.metin}"`;
      document.getElementById("gununSozuYazar").textContent = r.yazar;
    }

    // Profil resmi yükleme
    document.getElementById("avatarInput").addEventListener("change", e => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(evt) {
        user.profilResmi = evt.target.result;
        saveUser(user);
        renderProfile();
      };
      reader.readAsDataURL(file);
    });

    // Ad ve e-posta düzenleme
    document.getElementById("adSoyad").addEventListener("input", function() {
      user.ad = this.textContent.trim().slice(0, 40);
      saveUser(user);
    });
    document.getElementById("eposta").addEventListener("input", function() {
      user.eposta = this.textContent.trim().slice(0, 60);
      saveUser(user);
    });

    // Tema değiştirici
    const themeToggle = document.getElementById("themeToggle");
    const themeIcon = document.getElementById("themeIcon");
    function setTheme(mode) {
      document.body.setAttribute("data-bs-theme", mode);
      themeIcon.className = mode === "dark" ? "bi bi-sun" : "bi bi-moon";
      localStorage.setItem("profilTheme", mode);
    }
    themeToggle.addEventListener("click", () => {
      const current = document.body.getAttribute("data-bs-theme");
      setTheme(current === "dark" ? "light" : "dark");
    });
    // Kullanıcının tercih ettiği tema
    setTheme(localStorage.getItem("profilTheme") || "light");

    // Quizleri yenile butonu
    document.getElementById("refreshQuiz").addEventListener("click", function() {
      // Demo amaçlı quizleri karıştır
      user.quizler = user.quizler.sort(() => Math.random() - 0.5);
      saveUser(user);
      renderQuizTable();
    });

    // Sayfa yüklenince her şeyi çiz
    renderProfile();
    renderStats();
    renderQuizTable();
    renderRozetler();
    renderGununSozu();
  </script>
</body>
</html>
